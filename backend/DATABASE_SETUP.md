# Database Setup for USDT Backend (PostgreSQL)

## 1. Prerequisites

- PostgreSQL database (Neon or local)
- `DATABASE_URL` set in `.env` file
- Node.js and `pg` package installed

## 2. Running Migrations

1. **Connect to your database**

   - Use a tool like `psql`, DBeaver, or Neon web console.

2. **Run the migration script**

   - Copy and execute the contents of `migrations.sql` in your database.
   - Example using `psql`:
     ```bash
     psql "$DATABASE_URL" -f backend/migrations.sql
     ```

3. **Verify tables**
   - Check that tables `users`, `wallets`, `contacts`, `transactions`, `claims`, and `exchange_rates` exist.

## 3. Environment Variables

- Ensure `.env` contains:
  ```env
  DATABASE_URL=your_neon_postgres_url
  FRONTEND_URL=http://localhost:8080
  ```

## 4. Next Steps

- Update backend route handlers to use SQL queries via `db.js` instead of the in-memory store.
- Remove all usage of `store.js` after migration.

---

**Note:**

- Default exchange rates are inserted if not present.
- All UUIDs are generated by PostgreSQL (`gen_random_uuid()`).
- For local Postgres, you may need to enable the `pgcrypto` extension:
  ```sql
  CREATE EXTENSION IF NOT EXISTS "pgcrypto";
  ```
